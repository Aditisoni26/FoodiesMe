<% layout("/layouts/boilerplate")%>

    <body>
        <div class="container py-3">
            <% for (item of items) { %>
                <div class="card mb-4 mx-auto" style="max-width: 100%;">
                    <div class="row g-0 flex-column flex-md-row">
                        <!-- Image Column -->
                        <div class="col-12 col-md-4 text-center p-2">
                            <img src="<%= item.image_url %>" class="img-fluid rounded" alt="..." style="max-height: 200px; object-fit: cover;">
                        </div>

                        <!-- Details Column -->
                        <div class="col-12 col-md-8">
                            <div class="card-body">
                                <h5 class="card-title">Name -
                                    <%= item.name %>
                                </h5>
                                <p class="card-text">Price - â‚¹
                                    <%= item.price %>
                                </p>
                                <p class="card-text">Veg -
                                    <%= item.veg %>
                                </p>
                                <p class="card-text">Category -
                                    <%= item.category %>
                                </p>
                                <p class="card-text">Ordered on -
                                    <%= new Date(item.date).toLocaleString("en-IN", { dateStyle: "medium", timeStyle: "short" }) %>
                                </p>
                                <p class="card-text"><strong>Scheduled For:</strong>
                                    <%= new Date(item.scheduledAt).toLocaleString() %>
                                </p>
                                <p class="card-text"><b>Status:</b>
                                    <% if(item.status === "Delivered") { %>
                                        <span class="text-success"><%= item.status %></span>
                                        <% } else if(item.status === "On the Way") { %>
                                            <span class="text-warning"><%= item.status %></span>
                                            <% } else { %>
                                                <span class="text-danger"><%= item.status %></span>
                                                <% } %>
                                </p>

                                <!-- Cancel Option -->
                                <% if (!item.cancelled && item.status !== "Delivered") { %>
                                    <form method="POST" action="/order/<%= item._id %>/cancel">
                                        <button class="btn btn-outline-danger btn-sm">Cancel Order</button>
                                    </form>
                                    <% } else if (item.cancelled) { %>
                                        <p class="text-danger"><strong>Cancelled</strong></p>
                                        <% } %>
                            </div>
                        </div>
                    </div>
                </div>
                <% } %>
        </div>
    </body>